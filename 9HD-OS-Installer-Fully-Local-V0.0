#!/bin/bash -i

### DECLARATION OF FUNCTIONS

# INITRIAL USER PROMPT & HELPER FUNCTION
initial-user-prompt (){
    read -r -t 120 -p " RESPONSE: " Input < /dev/tty
    user-prompt-responder "$Input"
}
initial-user-prompt-responder (){
if [[ "$1" != "YES" ]]; then #abort
    clear
    echo -e "===\e[1;31m 9HD-OS INSTALLATION ABORTED\e[0m ==="
else #start install
    start-install-process
fi
}

# START OF INSTALL PROCESS
start-install-process (){
    clear
    echo -e "===\e[1;36m PROCEEDING WITH 9HD-OS INSTALLATION\e[0m ==="
    check-uefi-mode
}

# CHECKS THAT THE MACHINE IS BOOTED IN EFI MODE
check-uefi-mode (){
    EfiVarOutput=$(efivar -l) 2> /dev/null
    echo EfiVarOutput
}

# ASCII ART
startup-ascii (){
clear
echo -e "\e[0;36m"
echo "                                :-            %     %            -                                "
echo "                              -@%%@*  ::    = @:    @::    :: :#@*@#:                             "
echo "                           #@@@@@@@@*=      =+@@=+-@@*+      =#@@@@@@@@+                          "
echo "                         -#%=-%@@@@@@@@*:   :*@@@@@@@+    :*@@@@@@@@#-+@*:                        "
echo "                     #%%@@@@@@@@@@@#%@@@@#  #@@*@@@%%%%  *@@@@%@@@@@@@@@@@@%%+                    "
echo "                     %@%%#+: =@@@%-:+@@@@@# :%@*@@@*@@  @@@@@@*:+@@@@: -*#%@@#                    "
echo "                           =@@*##=    *@@@@+  %@@@@@#  *@@@@+   :*%##@@:                          "
echo "                 + :    =%@*           +@@@@   %@@@@  :@@@@*          :#@%-     +                 "
echo "              :#+@=*#                  :@@@@    =@=   :@@@@                 =* +# +               "
echo "             :@@@@@#%@@@@@@#=          =@@@*   %%*%@   #@@@+           :=+****%@@@@#              "
echo "            @@@@@@@@@#@@@@@@@@%        @@@@-   %@@@@   +@@@%        =@@@@@@@@@@@@@@@@-            "
echo "           =%-*@@@@@+*+++*@@@@@@+     #@@@*    %@@@@    %@@@+     -@@@@@@@@@@#@@@@@*#@*           "
echo "          +@@@@@@@@#:       #@@@@+   =@@@@     %@@@@     @@@@:   *@@@@@=     -@@@@@@@@@:          "
echo "       :*%@@@+ =@@#-         =@@@@   @@@@:    -@@@@@+    =@@@@: -@@@@=       -#@@@-=@@@@=         "
echo "       -@@#-  :@+            :%@@@= @@@@=    +@@@@@@@+    *@@@# *@@@#           :%%: =%@@@*       "
echo "            :#@=             :%@@@=+@@@#  -%@@@@@*@@@@@%:  %@@@-+@@@#             ##   -*#        "
echo "          :   :              -@@@@-@@@#: @@@%#       #@@@@  #@@@=@@@@:                 :          "
echo "          *-:#  -+***+:      -@@@%-@@@=-@@@%           #@@@-+@@@+%@@@=      :=+*+:  -+ *:         "
echo "        #=@#@*@@@@@@@@@@@+   +@@@#-@@@+:@@@@:    .    -@@@@:*@@@=#@@@*   +@@@@@@@@@@@#@*%-=       "
echo "       -@@@@@@@@@@@@@@@@@@@= *@@@*:@@@@ *@@@@#  -%-  *@@@@+:%@@@ *@@@# +@@@@@@@@@@@@@@@@@@#       "
echo "       #@@@@@@@*+     :#@@@@-*@@@* *@@@# -@@*:=@@@@@--#@@= #@@@+ *@@@#+@@@@#:    +##@@@@@@%-      "
echo "      @@=*@@@@%:        *@@@#=@@@%  @@@@%  :@@@@@@@@@@#  :%@@@#  #@@@*%@@@=        +@@@@@=@@=     "
echo "      =@@@@%@@@-        -@@@@-@@@@:  *@@@@#-=#@%+-*@@@@@#-#@@*  :@@@@-@@@@        :#@@@@@@#@:     "
echo "     :@@@# +@-          -@@@@ #@@@%   :@@@@@@@=    ::#@@@@=::   %@@@#:@@@@          :%@ =@@@*     "
echo "    +#@@+  %*           -@@@@ -@@@@#   +:+@@@@@@@@@@@*:%@@@+   #@@@%::@@@@:          =@- =@@@=    "
echo "    %@@:  -@+           :@@@@  :@@@@@+-@@@= =#@@@@@@@#::@@@@-+@@@@@- :@@@@            @*   %@@=   "
echo "          ::             #@@@+   #@@@@@@@@+ =@#::@@@@@= *@@@@@@@@*   +@@@@            :+-   :     "
echo "                         +@@@@-   :*@@@@@@=+@@@%: -@@@@+=@@@@@@*    :@@@@=                        "
echo "                          %@@@@:      -@* #@@@@     @@@@# #@-      =@@@@#                         "
echo "                           *@@@@@*=: :=*%@@@@#      :%@@@@%+-: :=#@@@@@*                          "
echo "                            :%@@@@@@@@@@@@@%-        :-@@@@@@@@@@@@@@%:                           "
echo "                               -#@@@@@@@*-:*@@%:    %@@*:-#@@@@@@@*-                              "
echo "                                           +@@@@%-#@@@@=                                          "
echo "                                             =@@@@@@@=                                            "
echo "                                                #@#                                               "
echo "                                               @+ +@                                              "
echo "                                               @. .@                                              "
echo "                                                +%=                                               "
echo "                                                 @                                                "
echo -e "                                                 '\e[1;36m                                                "
echo "  __        _______ _     ____ ___  __  __ _____   _____ ___     ___  _   _ ____     ___  ____    "
echo "  \ \      / / ____| |   / ___/ _ \|  \/  | ____| |_   _/ _ \   / _ \| | | |  _ \   / _ \/ ___|   "
echo "   \ \ /\ / /|  _| | |  | |  | | | | |\/| |  _|     | || | | | | (_) | |_| | | | | | | | \___ \   "
echo "    \ V  V / | |___| |__| |__| |_| | |  | | |___    | || |_| |  \__, |  _  | |_| | | |_| |___) |  "
echo "     \_/\_/  |_____|_____\____\___/|_|  |_|_____|   |_| \___/     /_/|_| |_|____/   \___/|____/   "
echo " "
echo -e "\e[1;31m ARE YOU SURE YOU WANT TO PROCEED WITH INSTALLATION? THIS WILL CAUSE LARGE CHANGES TO YOUR SYSTEM." 
echo -e " AN INTERNET CONNECTION IS REQUIRED. Type YES to contiue, or anything else to abort...\e[0m "
}

### INITIAL CLS EXECUTIONS
startup-ascii
initial-user-prompt